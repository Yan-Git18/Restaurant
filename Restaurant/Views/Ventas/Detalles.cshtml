@model Restaurant.Models.Rest_Venta
@{
    ViewData["Title"] = $"Detalle de Venta #{Model.Id}";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container-fluid py-4">
    <div class="dashboard-header mb-4">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1><i class="fas fa-file-invoice-dollar me-2"></i>Detalle de Venta</h1>
                <p class="mb-0">Información completa de la venta seleccionada</p>
            </div>
            <a asp-action="Index" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver al listado
            </a>
        </div>
    </div>

    <div class="card card-rutas">
        <div class="card-body">
            <h4 class="section-title mb-3">Datos Generales</h4>
            <div class="row mb-4">
                <div class="col-md-6">
                    <p><strong>Cliente:</strong> @Model.Pedido?.Cliente?.Nombre</p>
                    <p><strong>Correo:</strong> @Model.Pedido?.Cliente?.Correo</p>
                    <p><strong>Teléfono:</strong> @Model.Pedido?.Cliente?.Telefono</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Fecha:</strong> @Model.Fecha.ToString("dd/MM/yyyy HH:mm")</p>
                    <p><strong>Total:</strong> S/ @Model.Total.ToString("F2")</p>
                    <p>
                        <strong>Estado:</strong>
                        @if (Model.Estado == "Pagada")
                        {
                            <span class="badge bg-success">Pagada</span>
                        }
                        else if (Model.Estado == "Anulada")
                        {
                            <span class="badge bg-danger">Anulada</span>
                        }
                        else
                        {
                            <span class="badge bg-warning">@Model.Estado</span>
                        }
                    </p>
                </div>
            </div>

            <hr />

            <h4 class="section-title mb-3">Pagos Realizados</h4>
            @if (Model.Pagos != null && Model.Pagos.Any())
            {
                @await Html.PartialAsync("~/Views/Pagos/_PagosVenta.cshtml", Model.Pagos)
            }
            else
            {
                <p class="text-muted fst-italic">No hay pagos registrados para esta venta.</p>
            }

            <hr />

            <h4 class="section-title mb-3">Comprobante</h4>
            @if (Model.Comprobante != null)
            {
                @await Html.PartialAsync("~/Views/Comprobantes/_ComprobanteVenta.cshtml", Model.Comprobante)
            }
            else
            {
                <p class="text-muted fst-italic">No se ha generado ningún comprobante para esta venta.</p>
            }
        </div>
    </div>
</div>
